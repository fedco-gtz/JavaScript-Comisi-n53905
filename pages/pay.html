<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <!-- <TITLE> -->
    <title>VuelaSmart | Vola sin límites por Argentina</title>
    <!-- <Meta DESCRIPTION> -->
    <meta name="description"
        content="Descubre la belleza de Argentina con nuestros pasajes de avión. Explora destinos espectaculares, desde las majestuosas cataratas de Iguazú hasta la vibrante ciudad de Buenos Aires.
        Encuentra las mejores ofertas en vuelos y prepara tu próxima aventura con comodidad y confianza. ¡Reserva ahora y deja que tus sueños de viaje despeguen con nosotros!">
    <!-- <Meta KEYWORDS> -->
    <meta name="keywords"
        content="pasajes de avión, vuelos en Argentina, ofertas de vuelos, destinos turísticos, viajar por Argentina, boletos de avión, reservas de vuelos">
    <!-- ----Styles---- -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- ----Fonts---- -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@200;300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://kit.fontawesome.com/6b84894990.js" crossorigin="anonymous"></script>
    <!-- ----Icon---- -->
    <link rel="shortcut icon" href="../images/header/logo.png">
</head>

<body>
    <header>
        <div class="blandLogo">
            <img src="../images/header/logo.png" alt="VUELASMART" width="20%" height="20%">
        </div>
        <nav class="navbar">
            <ul>
                <li><a href="../index.html"><b>INICIO</b></a></li>
                <li><a><b>SERVICIOS</b></a>
                    <ul id="submenu">
                        <li><a href="./booking.html">VER RESERVA</a></li>
                    </ul>
                </li>
                <li><a href="./pay.html" class="pagar"><b>PAGAR</b></a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="mainTitle">
            <h1>BIENVENIDO A VUELASMART</h1>
            <p><b>Vola sin límites</b> por Argentina</p>
        </div>
        <section class="services">
            <h2>INFORMACIÓN DEL VUELO</h2>
            <div class="flightInfo" id="selectedDataContainer"></div>
            <a href="#" id="mostrarPopup">Detalle de la tarifa</a>
            <div id="popup" class="popup">
                <div class="popupContent">
                    <h2 style="margin-top: -5px;">DETALLLE DE LA TARIFA</h2>
                    <p id="detalle"></p>
                </div>
            </div>
        </section>
        <section class="services">
            <h2>PAGO</h2>
            <div class="container mt-5">
                <form id="formularioVuelo" method="post">
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="tipo_pago" id="tarjetaDebito"
                                    value="tarjetaDebito" required checked>
                                <label class="form-check-label" for="tarjetaDebito">Tarjeta de Débito</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="tipo_pago" id="tarjetaCredito"
                                    value="tarjetaCredito" required>
                                <label class="form-check-label" for="tarjetaCredito">Tarjeta de Crédito</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label for="numeroTarjeta">Número de la tarjeta</label>
                            <input type="text" class="form-control" id="NumeroTarjetaInput" name="NumeroTarjeta"
                                required>
                        </div>

                        <div class="form-group col-md-4">
                            <label for="codigoSeguridad">Código de Seguridad</label>
                            <input type="text" class="form-control" id="codigoSeguridadInput" name="codigoSeguridad"
                                required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label for="vencimientoTarjeta">Vencimiento de la tarjeta (MM/AA)</label>
                            <input type="text" class="form-control" id="vencimientoTarjetaInput"
                                name="vencimientoTarjeta" pattern="^(0[1-9]|1[0-2])\/?([0-9]{2})$" required>
                        </div>

                        <div class="form-group col-md-4">
                            <label for="nombreTitular">Nombre titular de la tarjeta</label>
                            <input type="text" class="form-control" id="nombreTitularInput" name="nombreTitular"
                                required>
                        </div>
                    </div>

                    <div class="form-group col-md-4" id="tarjetaCreditoRow" style="display: none;">
                        <label for="cuotasCredito">Cuotas</label>
                        <select id="cuotasCreditoOption" class="form-control" name="cuotasCredito">
                            <option value="3">3 cuotas</option>
                            <option value="6">6 cuotas</option>
                            <option value="9">9 cuotas</option>
                            <option value="12">12 cuotas</option>
                        </select>
                        <div class="form-group col-md-4 align-items-center d-flex mt-4">
                            <div class="form-check" id="checkboxTerminos">
                                <input class="form-check-input" type="checkbox" id="terminosCondiciones"
                                    name="terminosCondiciones">
                                <label class="form-check-label" for="terminosCondiciones">Acepto términos y
                                    condiciones</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md-4 align-items-center d-flex mt-4">
                        <div class="form-check" id="checkboxTerminos">
                            <input class="form-check-input" type="checkbox" id="terminosCondiciones"
                                name="terminosCondiciones">
                            <label class="form-check-label" for="terminosCondiciones">Acepto términos y
                                condiciones</label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <button type="submit" id="verificarButton" class="btn btn-primary">VERIFICAR DATOS</button>
                        </div>
                    </div>

                    <div class="form-row" id="pagarButtonContainer" style="display: none;">
                        <div class="form-group col-md-12">
                            <button type="submit" id="pagarButton" class="btn btn-primary">PAGAR</button>
                        </div>
                    </div>
                </form>
            </div>


            <div id="errorNumeroTarjeta" style="display: none;">
                <p>Por favor, verifique el número de tarjeta.</p>
            </div>
            <div id="errorCodigoSeguridad" style="display: none;">
                <p>Por favor, verifique el código de seguridad.</p>
            </div>



            <div id="popupPay">
                <div class="spinner"></div>
                <img class="checkmark" src="../images/pay/Correct.png" alt="Checkmark">
                <img class="checkerror" src="../images/pay/Incorrect.png" alt="Checkerror">
                <button class="close">x</button>
                <p id="mensaje"></p>
                <p id="codigoExitoso"></p>
            </div>
    </main>

    <footer class="footer">
        <div class="footerSection">
            <img src="../images/header/logo.png" alt="VUELASMART" width="40%" height="40%">
            <div class="socialNetworks">
                <a href="#"><i class="fa-brands fa-square-facebook"></i></a>
                <a href="#"><i class="fa-brands fa-twitter"></i></i></a>
                <a href="#"><i class="fa-brands fa-instagram"></i></i></a>
            </div>
        </div>
        <div class="footerSection">
            <p><i class="fa-solid fa-envelope"></i> Contacto: <a
                    href="mailto:info@vuelasmart.com">info@vuelasmart.com</a>
            </p>
        </div>
        <div class="footerSection">
            <a href="../index.html">INICIO</a>
            <a href="#">PROTECCIÓN DE DATOS PERSONALES</a>
            <a href="#">POLÍTICA DE PRIVACIDAD</a>
        </div>
    </footer>
</body>

<script src="../js/extra.js"></script>
<script src="../js/showFlight.js"></script>
<script src="../js/rateDetail.js"></script>
<script src="../js/main.js"></script>
<script src="../js/pay.js"></script>
<script src="../js/paymentProcess.js"></script>
<!-- ----Bootstrap---- -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const FORM = document.getElementById('formularioVuelo');

        FORM.addEventListener('submit', event => {
            event.preventDefault();

            const TIPO_PAGO = document.querySelector('input[name="tipo_pago"]:checked').value;
            const NUMERO_TARJETA = document.getElementById('NumeroTarjetaInput').value;
            const CODIGO_SEGURIDAD = document.getElementById('codigoSeguridadInput').value;

            let CUOTAS_CREDITO = 1;
            if (TIPO_PAGO === !"Tarjeta Crédito") {
                CUOTAS_CREDITO = parseInt(document.getElementById('cuotasCreditoOption').value);
            };

            let EMISOR = "Desconocido";
            let codigoSeguridadValido = true;

            const PRIMER_DIGITO = NUMERO_TARJETA.charAt(0);
            if (PRIMER_DIGITO === '4' && NUMERO_TARJETA.length === 16) {
                EMISOR = "VISA";
                if (CODIGO_SEGURIDAD.length !== 3) {
                    codigoSeguridadValido = false;
                }
            } else if (PRIMER_DIGITO === '5' && NUMERO_TARJETA.length === 16) {
                EMISOR = "MASTERCARD";
                if (CODIGO_SEGURIDAD.length !== 3) {
                    codigoSeguridadValido = false;
                }
            } else if (PRIMER_DIGITO === '3' && NUMERO_TARJETA.length === 15) {
                EMISOR = "AMERICAN EXPRESS";
                if (CODIGO_SEGURIDAD.length !== 4) {
                    codigoSeguridadValido = false;
                }
            } else {
                codigoSeguridadValido = false;
            };

            // Mostrar el mensaje de error si el código de seguridad no es válido
            if (!codigoSeguridadValido) {
                document.getElementById('errorCodigoSeguridad').style.display = 'block';
                return;
            };

            // Ocultar el mensaje de error si el código de seguridad es válido
            document.getElementById('errorCodigoSeguridad').style.display = 'none';

            console.log(`|-----------------|\n| RESUMEN DE PAGO |\n|-----------------|`);
            console.log(`Tipo de pago: ${TIPO_PAGO}`)
            console.log(`Cantidad de cuotas: ${CUOTAS_CREDITO}`)
            console.log(`Número de Tarjeta: ${NUMERO_TARJETA}`);
            console.log(`Código de Seguridad: ${CODIGO_SEGURIDAD}`);
            console.log(`Emisor de la Tarjeta: ${EMISOR}`);

            // Mostrar el botón de PAGAR después de verificar los datos
            document.getElementById('verificarButton').style.display = 'none';
            document.getElementById('pagarButtonContainer').style.display = 'block';
        });
    });
</script>

</html>